using Xacc.Languages.CSLex;
using Xacc.ComponentModel;
using System.Drawing;
using LexerBase = Xacc.Languages.CSLex.Language<Xacc.Languages.CSLex.Yytoken>.LexerBase;
namespace Xacc.Languages
{
  sealed class XmlLanguage : CSLex.Language<CSLex.Yytoken>
  {
	  public override string Name {get {return "XML"; } }
	  public override string[] Extensions {get { return new string[]{"xml","html","xsl"}; } }
	  LexerBase lexer = new XmlLexer();
	  protected override LexerBase Lexer
	  {
		  get {return lexer;}
	  }
	  public override bool MatchLine(string startline)
    {
      return startline.StartsWith("<");
    }
  }
}
//NOTE: comments are not allowed except in code blocks


sealed class XmlLexer : LexerBase {

	public XmlLexer () {
	YY_BOL = 65536;
	YY_EOF = 65537;

	}

	const int starttag = 3;
	const int comment = 1;
	const int attr = 10;
	const int pp = 8;
	const int cdata = 5;
	const int YYINITIAL = 0;
	const int endtag = 4;
	const int script = 6;
	const int mlstr = 9;
	const int intag = 2;
	const int scriptstart = 7;
	static readonly int[] yy_state_dtrans = {
		0, 		61, 		63, 		65, 		66, 		67, 		69, 		77, 		81, 		82, 		83
	};
	static readonly int[] yy_acpt = {
0,
4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,
4,4,4,0,4,4,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,4,4,4,4	};
	static readonly int[] yy_cmap = unpackFromString(
1,65538,
"6:9,22,21,6:2,5,6:18,22,2,19,17,6,7,29,20,6:5,3,17,16,18:11,31,1,14,4,15,6," +
"11,30,9,10,30:15,12,30:6,8,6,13,6,17,6,30:2,24,30:5,26,30:6,27,30,25,23,28," +
"30:6,6:65413,0:2")[0];

	static readonly int[] yy_rmap = {
0,1,2,1,3,1,4,1,1,1,1,1,5,6,1,1,7,1,1,1,8,8,1,1,9,10,11,1,12,1,1,13,1,1,1,14,15,1,16,1,17,1,1,18,19,20,4,21,4,22,23,17,24,1,1,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59};

	static readonly int[,] yy_nxt = {
{1,2,3,3,3,-1,3,3,3,4,4,4,4,3,3,3,3,4,3,3,3,5,6,4,4,4,4,4,4,45,4,3},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,44,-1,-1,-1,-1,7,-1,-1,-1,-1,-1,-1,-1,53,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,4,-1,-1,-1,-1,-1,4,4,4,4,-1,-1,-1,-1,4,4,-1,-1,-1,-1,4,4,4,4,4,4,-1,4,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,12,12,-1,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,-1,12,12,12,12,12,12,12,12,12,12},
{-1,-1,-1,62,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,16,-1,-1,-1,-1,-1,16,16,16,16,-1,-1,-1,-1,16,16,-1,-1,-1,-1,16,16,16,16,16,16,-1,16,-1},
{-1,-1,-1,20,-1,-1,-1,-1,-1,20,20,20,20,-1,-1,-1,-1,20,20,-1,-1,-1,-1,20,20,20,20,20,20,-1,20,-1},
{-1,-1,-1,24,-1,-1,-1,-1,-1,24,24,24,24,-1,-1,-1,-1,24,24,-1,-1,-1,-1,24,24,24,24,24,24,-1,24,-1},
{-1,25,25,25,25,25,25,25,25,25,25,25,25,-1,25,25,25,25,25,25,25,-1,25,25,25,25,25,25,25,25,25,25},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,68,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,54,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,54,70,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,31,-1,-1,-1,-1,-1,31,31,31,31,-1,-1,-1,-1,31,31,-1,-1,-1,-1,31,31,31,31,31,31,-1,31,-1},
{-1,35,35,35,35,35,35,-1,35,35,35,35,35,35,35,35,35,35,35,35,35,-1,35,35,35,35,35,35,35,35,35,35},
{-1,-1,-1,-1,37,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,-1,38,-1,38,38,38,38,38,38,38,38,38,38},
{-1,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,-1,40,-1,-1,40,40,40,40,40,40,40,40,40},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,43,43,43,43,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,43,43,43,43,43,43,-1,43,9},
{-1,-1,-1,52,-1,-1,-1,-1,55,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,43,43,43,43,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,43,43,43,43,43,43,-1,43,-1},
{-1,-1,-1,20,-1,-1,-1,-1,-1,20,20,20,20,-1,-1,-1,-1,20,20,-1,-1,-1,-1,20,20,20,20,20,21,-1,20,-1},
{-1,-1,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,-1,-1,49,49,49,49,49,49,49,49,49},
{-1,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,85,51,85,85,50,50,50,50,50,50,50,50,50},
{-1,-1,-1,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,56,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,57,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,58,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,59,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,60,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{1,12,12,13,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,5,12,12,12,12,12,12,12,12,12,12},
{-1,-1,-1,-1,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{1,-1,-1,-1,15,-1,-1,-1,-1,16,16,16,16,-1,17,64,64,16,-1,-1,-1,5,6,16,16,16,16,16,16,-1,16,-1},
{-1,-1,-1,-1,18,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{1,19,19,19,19,-1,19,19,19,20,20,20,20,19,19,19,19,20,19,19,19,5,46,89,20,20,20,20,20,19,20,19},
{1,22,22,22,23,-1,22,22,22,24,24,24,24,22,22,22,22,24,22,22,22,5,48,24,24,24,24,24,24,22,24,22},
{1,25,25,25,25,25,25,25,25,25,25,25,25,26,25,25,25,25,25,25,25,5,25,25,25,25,25,25,25,25,25,25},
{-1,-1,-1,-1,27,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{1,28,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,5,6,49,49,49,49,49,49,49,49,49},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,70,71,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,72,-1,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,73,-1,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,74,-1,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,75,-1,-1,-1,-1},
{-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,76,-1,-1,-1},
{-1,-1,-1,-1,29,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,76,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{1,-1,-1,-1,30,-1,-1,-1,-1,31,31,31,31,-1,32,78,78,31,-1,79,80,5,6,31,31,31,31,31,31,-1,31,-1},
{-1,-1,-1,-1,33,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},
{-1,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,34,79,-1,79,79,79,79,79,79,79,79,79,79},
{-1,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,34,80,80,80,80,80,80,80,80,80,80,80},
{1,35,35,35,35,35,35,36,35,35,35,35,35,35,35,35,35,35,35,35,35,5,35,35,35,35,35,35,35,35,35,35},
{1,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,39,38,5,38,38,38,38,38,38,38,38,38,38},
{1,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,84,50,5,6,40,40,40,40,40,40,40,40,40},
{-1,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,41,84,42,84,84,84,84,84,84,84,84,84,84},
{-1,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,41,85,85,85,85,85,85,85,85,85,85,85},
{-1,-1,-1,20,-1,-1,-1,-1,-1,20,20,20,20,-1,-1,-1,-1,20,20,-1,-1,-1,-1,20,20,20,20,47,20,-1,20,-1},
{-1,-1,-1,20,-1,-1,-1,-1,-1,20,20,20,20,-1,-1,-1,-1,20,20,-1,-1,-1,-1,20,20,20,86,20,20,-1,20,-1},
{-1,-1,-1,20,-1,-1,-1,-1,-1,20,20,20,20,-1,-1,-1,-1,20,20,-1,-1,-1,-1,20,20,87,20,20,20,-1,20,-1},
{-1,-1,-1,20,-1,-1,-1,-1,-1,20,20,20,20,-1,-1,-1,-1,20,20,-1,-1,-1,-1,20,88,20,20,20,20,-1,20,-1}};

	public override IToken lex ()
 {
		int yy_lookahead;
		int yy_anchor = YY_NO_ANCHOR;
		int yy_state = yy_state_dtrans[yy_lexical_state];
		int yy_next_state = YY_NO_STATE;
		int yy_last_accept_state = YY_NO_STATE;
		bool yy_initial = true;
		int yy_this_accept;

		yy_mark_start();
		yy_this_accept = yy_acpt[yy_state];
		if (YY_NOT_ACCEPT != yy_this_accept) {
			yy_last_accept_state = yy_state;
			yy_mark_end();
		}
		while (true) {
			if (yy_initial && yy_at_bol) yy_lookahead = YY_BOL;
			else yy_lookahead = yy_advance();
			yy_next_state = YY_F;
			yy_next_state = yy_nxt[yy_rmap[yy_state],yy_cmap[yy_lookahead]];
			if (YY_EOF == yy_lookahead && true == yy_initial) {
				return Yytoken.EOF;
			}
			if (YY_F != yy_next_state) {
				yy_state = yy_next_state;
				yy_initial = false;
				yy_this_accept = yy_acpt[yy_state];
				if (YY_NOT_ACCEPT != yy_this_accept) {
					yy_last_accept_state = yy_state;
					yy_mark_end();
				}
			}
			else {
				if (YY_NO_STATE == yy_last_accept_state) {
					throw (new System.Exception("Lexical Error: Unmatched Input."));
				}
				else {
					yy_anchor = yy_acpt[yy_last_accept_state];
					if (0 != (YY_END & yy_anchor)) {
						yy_move_end();
					}
					yy_to_mark();
					switch (yy_last_accept_state) {
					case 36: 
     {return Plain(); }
						break;
					case 12: 
                {return DocComment();}
						break;
					case 2: case 44: case 53: 
                        {ENTER(starttag); return Keyword();}
						break;
					case 14: 
              {EXIT(); return Comment();}
						break;
					case 31: 
                                             {return Number();}
						break;
					case 33: 
                      {EXIT(); return Keyword();}
						break;
					case 29: 
                                         {EXIT(); return Keyword();}
						break;
					case 26: 
        {return Plain(); }
						break;
					case 20: case 47: case 86: case 87: case 88: case 89: 
                                          {EXIT(); ENTER(intag); return Keyword();}
						break;
					case 6: 
      {;}
						break;
					case 4: 
                                           {return Plain();}
						break;
					case 8: 
               {ENTER(endtag); return Keyword();}
						break;
					case 7: 
               {ENTER(pp); return Keyword(); }
						break;
					case 41: case 51: 
                                      {EXIT(); return String();}
						break;
					case 42: 
                    {ENTER(mlstr); return String();}
						break;
					case 15: 
          {EXIT(); return Keyword();}
						break;
					case 19: case 46: 
           {return Error(); }
						break;
					case 22: case 48: 
         {return Error(); }
						break;
					case 21: 
                  {EXIT(); ENTER(scriptstart); return Keyword();}
						break;
					case 5: 
  {return NewLine();}
						break;
					case 32: 
                {return Operator();}
						break;
					case 37: 
        {EXIT(); return Keyword();}
						break;
					case 16: 
                                       {return Number();}
						break;
					case 38: 
               {return String();}
						break;
					case 1: 

						break;
					case 18: 
                {EXIT(); return Keyword();}
						break;
					case 25: 
               {return Plain(); }
						break;
					case 10: 
                 {ENTER(comment); return Comment();}
						break;
					case 11: 
                      {ENTER(cdata); return Other(); }
						break;
					case 9: 
                       {return Other(); }
						break;
					case 27: 
            {EXIT(); return Other();}
						break;
					case 40: case 50: 
                 {EXIT(); return String(); }
						break;
					case 13: 
          {return DocComment(); }
						break;
					case 3: case 45: 
            {return Plain(); }
						break;
					case 24: 
                                        {return Keyword();}
						break;
					case 17: 
          {ENTER(attr); return Operator();}
						break;
					case 30: 
                {EXIT(); ENTER(script); return Keyword();}
						break;
					case 35: 
           {return Plain(); }
						break;
					case 28: case 49: case 54: 
                                {return Plain();}
						break;
					case 23: 
           {EXIT(); return Keyword();}
						break;
					case 39: 
           {EXIT(); EXIT(); return String();}
						break;
					case 34: 
                                             {return String();}
						break;
					default:
						yy_error(YY_E_INTERNAL,false);break;
					}
					yy_initial = true;
					yy_state = yy_state_dtrans[yy_lexical_state];
					yy_next_state = YY_NO_STATE;
					yy_last_accept_state = YY_NO_STATE;
					yy_mark_start();
					yy_this_accept = yy_acpt[yy_state];
					if (YY_NOT_ACCEPT != yy_this_accept) {
						yy_last_accept_state = yy_state;
						yy_mark_end();
					}
				}
			}
		}
	}
}
